!function(a){function b(a){return a.toString().toLowerCase().replace(/\s+/g,"-").replace(/\,+/g,"-").replace(/\"+/g,"-").replace(/\'+/g,"-").replace(/\/+/g,"-").replace(/\(+/g,"-").replace(/\)+/g,"-").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}function c(){var b=a("#wp-travel-pricing-option-type").val(),c="."+b+"-option-row";a(".price-option-row").addClass("hidden"),a(c).removeClass("hidden"),f(),g()}function d(){var b=a("#wp-travel-pricing-option-type").val(),c=a("#wp-travel-fixed-departure");"multiple-price"!==b&&"single-price"!==b||(c.is(":checked")?(a(".wp-travel-fixed-departure-row").removeClass("hidden"),a(".wp-travel-trip-duration-row").addClass("hidden")):(a(".wp-travel-fixed-departure-row").addClass("hidden"),a(".wp-travel-trip-duration-row").removeClass("hidden"))),a(".wp-travel-enable-multiple-dates").addClass("hidden"),"multiple-price"===b&&(c.is(":checked")?(a(".wp-travel-enable-multiple-dates, #wp-variations-multiple-dates").removeClass("hidden"),e()):a(".wp-travel-enable-multiple-dates, #wp-variations-multiple-dates").addClass("hidden"))}function e(){var b=a("#wp-travel-pricing-option-type").val(),c=a("#wp-travel-fixed-departure"),d=a("#wp-travel-enable-multiple-fixed-departure");"multiple-price"===b&&c.is(":checked")&&d.is(":checked")?(a(".wp-travel-fixed-departure-row").addClass("hidden"),a("#wp-variations-multiple-dates").removeClass("hidden")):(a(".wp-travel-fixed-departure-row").removeClass("hidden"),a("#wp-variations-multiple-dates").addClass("hidden"))}function f(){"single-price"==a("#wp-travel-pricing-option-type").val()&&a("#wp-travel-enable-sale").is(":checked")?(a("#wp-travel-sale-price").removeAttr("disabled").closest(".price-option-row").removeClass("hidden"),a("#wp-travel-price").attr("required","required"),a("#wp-travel-sale-price").attr("required","required")):(a("#wp-travel-sale-price").attr("disabled","disabled").closest(".price-option-row").addClass("hidden"),a("#wp-travel-price").removeAttr("required"),a("#wp-travel-sale-price").removeAttr("required"))}function g(){a("#wp-travel-minimum-partial-payout-percent-use-global").is(":checked")?a("#wp-travel-minimum-partial-payout-percent").closest(".price-option-row").addClass("hidden"):a("#wp-travel-minimum-partial-payout-percent").closest(".price-option-row").removeClass("hidden")}function f(){"single-price"==a("#wp-travel-pricing-option-type").val()&&a("#wp-travel-enable-sale").is(":checked")?(a("#wp-travel-sale-price").removeAttr("disabled").closest(".price-option-row").removeClass("hidden"),a("#wp-travel-price").attr("required","required"),a("#wp-travel-sale-price").attr("required","required")):(a("#wp-travel-sale-price").attr("disabled","disabled").closest(".price-option-row").addClass("hidden"),a("#wp-travel-price").removeAttr("required"),a("#wp-travel-sale-price").removeAttr("required"))}function h(){a(".custom-payout-option-row").each(function(){a(this).hasClass("global-enabled")?a(this).removeClass("hidden"):a(this).addClass("hidden")})}if("undefined"!=typeof GMaps&&a("#gmap").length>0){var i=new GMaps({div:"#gmap",lat:wp_travel_drag_drop_uploader.lat,lng:wp_travel_drag_drop_uploader.lng}),j=document.getElementById("search-input"),k=new google.maps.places.Autocomplete(j);i.setCenter(wp_travel_drag_drop_uploader.lat,wp_travel_drag_drop_uploader.lng),i.setZoom(15),i.addMarker({lat:wp_travel_drag_drop_uploader.lat,lng:wp_travel_drag_drop_uploader.lng,title:wp_travel_drag_drop_uploader.loc,draggable:!0,dragend:function(b){var c=b.latLng.lat(),d=b.latLng.lng();i.setCenter(c,d);var e=new google.maps.LatLng(c,d),f=f=new google.maps.Geocoder;f.geocode({latLng:e},function(b,e){e==google.maps.GeocoderStatus.OK&&b[1]&&(a("#wp-travel-lat").val(c),a("#wp-travel-lng").val(d),a("#wp-travel-location").val(b[1].formatted_address),a("#search-input").val(b[1].formatted_address))})}}),k.bindTo("bounds",i),k.addListener("place_changed",function(){var b=k.getPlace();if(!b.geometry)return void window.alert("Autocomplete's returned place contains no geometry");i.removeMarkers(),b.geometry.viewport?i.fitBounds(b.geometry.viewport):(i.setCenter(b.geometry.location),i.setZoom(15));var c=b.geometry.location.lat(),d=b.geometry.location.lng(),e=new google.maps.LatLng(c,d),f=f=new google.maps.Geocoder;f.geocode({latLng:e},function(b,e){e==google.maps.GeocoderStatus.OK&&b[1]&&(a("#wp-travel-lat").val(c),a("#wp-travel-lng").val(d),a("#wp-travel-location").val(b[1].formatted_address),a("#search-input").val(b[1].formatted_address))}),i.addMarker({lat:c,lng:d,title:b.formatted_address,draggable:!0,dragend:function(b){var c=b.latLng.lat(),d=b.latLng.lng();i.setCenter(c,d);var e=new google.maps.LatLng(c,d),f=f=new google.maps.Geocoder;f.geocode({latLng:e},function(b,e){e==google.maps.GeocoderStatus.OK&&b[1]&&(a("#wp-travel-lat").val(c),a("#wp-travel-lng").val(d),a("#wp-travel-location").val(b[1].formatted_address),a("#search-input").val(b[1].formatted_address))})}})})}a.fn.tabs&&a(".wp-travel-tabs-wrap").tabs({activate:function(b,c){a(c.newPanel).css({display:"inline-block"}),a("#wp-travel-settings-current-tab").val(a(c.newPanel).attr("id")),"undefined"!=typeof GMaps&&a("#gmap").length>0&&(i.refresh(),google.maps.event.trigger(i.map,"resize"))},create:function(b,c){a(c.panel).css({display:"inline-block"}),a("#wp-travel-settings-current-tab").val(a(c.panel).attr("id"))},load:function(a,b){}}),function(){a.fn.wpt_datepicker&&(a("#wp-travel-start-date").wpt_datepicker({language:"en",minDate:new Date,onSelect:function(b){newMinDate=null,newMaxDate=new Date,""!==b&&(milliseconds=moment(b,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate())))),a("#wp-travel-end-date").wpt_datepicker({minDate:newMinDate})}}),a("#wp-travel-end-date").wpt_datepicker({language:"en",minDate:new Date}),a(".wp-travel-datepicker").wpt_datepicker({language:"en",minDate:new Date}),a(".wp-travel-timepicker").wpt_datepicker({language:"en",timepicker:!0,onlyTimepicker:!0}))}(),a(document).on("click","#publish",function(){var b=a("#wp-travel-start-date").val(),c=a("#wp-travel-end-date").val(),d="";if(""==b&&""==c||""==b&&(d+="Start date can't be empty!\n"),""!=d)return alert(d),!1;a(document).off("click","#publish")});a(document).on("click","#wp-travel-enable-sale",function(){f()}),a(document).on("change","#wp-travel-pricing-option-type",function(){c(),d(),h()}),a(document).on("click","#wp-travel-fixed-departure",function(){d()}),a(document).on("change","#wp-travel-enable-multiple-fixed-departure",function(){e()}),c(),d(),h(),a(document).on("click",".wp-travel-clone-post",function(b){b.preventDefault();var c=a(this).data("post_id"),d=a(this).data("security"),e={post_id:c,security:d,action:"wp_travel_clone_trip"};a.ajax({url:ajaxurl,data:e,type:"post",dataType:"json",success:function(a){location.href=location.href}})}),a(document).on("change",".wp-travel-variation-pricing-name",function(){var c=b(a(this).val());a(this).siblings(".wp-travel-variation-pricing-uniquekey").val(c)}),a(document).on("change",".wp-travel-pricing-options-list",function(){var b=a(this).data("category-id");"custom"===a(this).val()?a(".custom-pricing-label-wrap-"+b).css("display","block"):a(".custom-pricing-label-wrap-"+b).css("display","none")}),a(".wp-travel-pricing-options-list").trigger("change"),a(document).on("change",".wp-travel-enable-variation-price-sale",function(){var b=a(this).closest(".repeat-row").next(".repeat-row");a(this).is(":checked")?(b.removeClass("hidden"),b.find('input[type="number"]').attr("required","required")):(b.addClass("hidden"),b.find('input[type="number"]').removeAttr("required"))}),a(".wp-travel-enable-variation-price-sale").is(":checked")?a(this).closest(".repeat-row").next(".repeat-row").removeClass("hidden"):a(this).closest(".repeat-row").next(".repeat-row").addClass("hidden"),a(document).on("change",".wp-travel-enable-variation-price-sale-new",function(){var b=a(this).closest(".repeat-row").next(".repeat-row");a(this).is(":checked")?(b.removeClass("visibility-hidden"),b.find('input[type="number"]').attr("required","required")):(b.addClass("visibility-hidden"),b.find('input[type="number"]').removeAttr("required"))}),a(".wp-travel-enable-variation-price-sale-new").is(":checked")?a(this).closest(".repeat-row").next(".repeat-row").removeClass("visibility-hidden"):a(this).closest(".repeat-row").next(".repeat-row").addClass("visibility-hidden"),a("#wp-travel-enable-sale").is(":checked")&&(a("#wp-travel-price").attr("required","required"),a("#wp-travel-sale-price").attr("required","required")),a(document).on("click",".wp-travel-featured-post",function(b){b.preventDefault();var c=a(this),d=a(this).attr("data-post-id"),e=a(this).attr("data-nonce"),f={action:"wp_travel_featured_post",post_id:d,nonce:e};a.ajax({url:ajaxurl,data:f,type:"post",dataType:"json",success:function(a){"invalid"!=a&&(c.removeClass("dashicons-star-filled").removeClass("dashicons-star-empty"),"yes"==a.new_status?c.addClass("dashicons-star-filled"):c.addClass("dashicons-star-empty"))}})}),a("#add_itinerary_row").click(function(b){b.preventDefault();var c=wp.template("wp-travel-itinerary-items"),d=Math.floor(990*Math.random())+10;a(".itinerary_block").append(c({random:d})),a(".itinerary_block .panel:last .wp-travel-datepicker").wpt_datepicker({language:"en",minDate:new Date}),a(".itinerary_block .panel:last .wp-travel-timepicker").wpt_datepicker({language:"en",timepicker:!0,onlyTimepicker:!0}),a(".while-empty").addClass("hidden"),a(".wp-collapse-open").removeClass("hidden")}),a(document).on("click",".remove_itinery",function(b){return b.preventDefault(),a(this).closest(".itinerary_wrap").remove(),!1});a(".tab-accordion .wp-travel-sorting-tabs, #tab-accordion .wp-travel-sorting-tabs, #tab-accordion-itineraries #accordion-itinerary-data").sortable({handle:".wp-travel-sorting-handle"}),a("#wp-travel-tab-content-setting .wp-travel-sorting-tabs tbody").sortable({handle:".wp-travel-sorting-handle"}),a.ui.accordion.prototype._originalKeyDown=a.ui.accordion.prototype._keydown,a.ui.accordion.prototype._keydown=function(b){var c=a.ui.keyCode;b.keyCode!=c.SPACE&&this._originalKeyDown(b)},a(".ui-accordion-header").click(function(){a(".open-all-link").removeClass("hidden"),a(".close-all-link").removeClass("hidden")}),a(document).on("click",".wt-accordion-close",function(b){var c=a(this).closest(".tab-accordion").attr("id");if(1==confirm("Are you sure you want to delete?")){a(this).closest("div.panel-default").remove();a("#"+c+" .panel-default:visible").length>0?(a(".while-empty").addClass("hidden").hide(),a(".wp-collapse-open").removeClass("hidden").show()):(a(".wp-collapse-open").addClass("hidden").hide(),a(".while-empty").removeClass("hidden").show())}}),a(".wp-travel-faq-add-new").on("click",function(){var b=wp.template("wp-travel-faq"),c=(a("#accordion-faq-data panel-default").length,Math.floor(990*Math.random())+10);a("#accordion-faq-data").append(b({random:c})),a(".while-empty").addClass("hidden"),a(".wp-collapse-open").removeClass("hidden")}),a(".wp-travel-pricing-add-new").on("click",function(){var b=wp.template("wp-travel-pricing-options"),c=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),d=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);a("#pricing-options-data").append(b({random:c,category_id:d}))}),a(".wp-travel-trip-facts-add-new").on("click",function(){var b=wp.template("wp-travel-trip-facts-options"),c=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);a("#accordion-fact-data").append(b({random:c}))}),a("#date-options-data .panel .wp-travel-multiple-start-date").each(function(){var b=a(this),c=a(this).val();newMinDate=new Date,""!==c&&(milliseconds=moment(c,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate()))),a(this).siblings(".wp-travel-multiple-end-date").wpt_datepicker({minDate:newMinDate})),a(this).wpt_datepicker({language:"en",minDate:new Date,onSelect:function(a){newMinDate=null,newMaxDate=new Date,""!==a&&(milliseconds=moment(a,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate())))),b.siblings(".wp-travel-multiple-end-date").wpt_datepicker({minDate:newMinDate})}})}),a(".wp-travel-multiple-dates-add-new").on("click",function(){var b=wp.template("wp-travel-multiple-dates"),c=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);a("#date-options-data").append(b({random:c})),a("#date-options-data .panel:last .wp-travel-multiple-start-date").wpt_datepicker({language:"en",minDate:new Date,onSelect:function(b){newMinDate=null,newMaxDate=new Date,""!==b&&(milliseconds=moment(b,"YYYY-MM-DD"),new_date_min=new Date(milliseconds),newMinDate=new Date(new_date_min.setDate(new Date(new_date_min.getDate())))),a("#date-options-data .panel:last .wp-travel-multiple-end-date").wpt_datepicker({minDate:newMinDate})}})}),a(document).on("change keyup","*[bind]",function(b){var c=a(this).attr("bind"),d=""!=a(this).val()?a(this).val():"Untitled";a("*[bind='"+c+"']").html(d),a("*[bind='"+c+"']").val(a(this).val())}),a(document).on("change keyup","*[bindPrice]",function(b){var c=a(this).attr("bindPrice"),d=""!=a(this).val()?a(this).val():1;a("*[bindSale='"+c+"']").attr("max",d)}),a(document).on("keyup change",".section_title",function(){var b=a(this).val();a(this).siblings(".wp-travel-accordion-title").html(b)}),a(document).on("keyup change","#wp-travel-price",function(){var b=a(this).val();a("#wp-travel-sale-price").attr("max",b)}),a(document).on("keyup change",".pricing-opt-min-pax",function(){var b=a(this).val();a(this).siblings(".pricing-opt-max-pax").attr("min",b)}),a("#wp-travel-use-global-tabs").is(":checked")?a("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"0.3","pointer-events":"none"}):a("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"1","pointer-events":"auto"}),a("#wp-travel-use-global-tabs").change(function(){a(this).is(":checked")?a("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"0.3","pointer-events":"none"}):a("#wp-travel-tab-content-tabs .wp-travel-sorting-tabs").css({opacity:"1","pointer-events":"auto"})}),a("#wp-travel-use-global-trip-enquiry").is(":checked")?a("#wp-travel-enable-trip-enquiry-option-row").addClass("hidden"):a("#wp-travel-enable-trip-enquiry-option-row").removeClass("hidden"),a("#wp-travel-use-global-trip-enquiry").change(function(){a(this).is(":checked")?a("#wp-travel-enable-trip-enquiry-option-row").addClass("hidden"):a("#wp-travel-enable-trip-enquiry-option-row").removeClass("hidden")}),a(document).on("click","#wp-travel-enable-sale",function(){a("#wp-travel-price").val();a(this).is(":checked")&&a("#wp-travel-sale-price").val()}),a(document).on("change","#wp-travel-sale-price",function(){a(this).val()}),a(document).on("click","#wp-travel-minimum-partial-payout-percent-use-global",function(){g()}),a('input[type="number"]').on("change",function(){if("Min PAX"==a(this).attr("placeholder")){var b=a(this).val();a(this).siblings('input[type="number').attr("min",b)}}),jQuery(".select-main .close").addClass("hidden"),jQuery(document).on("click",".select-main .close",function(){a(this).siblings(".wp-travel-active").removeClass("wp-travel-active"),a(this).siblings(".carret").removeClass("hidden"),a(this).addClass("hidden")}),jQuery(document).on("click",".select-main, .select-main .caret",function(b){0==a(this).find("ul.wp-travel-active").length?(a(this).children("ul").addClass("wp-travel-active"),a(this).children(".close").removeClass("hidden"),a(this).children(".carret").addClass("hidden")):(a(this).children(".carret").removeClass("hidden"),a(this).children(".close").addClass("hidden"),a(this).children("ul").removeClass("wp-travel-active"))}),a(document).on("click",function(b){var c=a(".select-main");c===b.target||c.has(b.target).length||(a("ul.wp-travel-active").removeClass("wp-travel-active"),a(".select-main").children(".carret").removeClass("hidden"),a(".select-main").children(".close").addClass("hidden"))}),jQuery(document).on("change",".select-main li input.multiselect-value",function(a){var b=jQuery(this).closest(".select-main").find("li input.multiselect-value").length;jQuery(this).closest(".select-main").find("li input.multiselect-value:checked").length==b?jQuery(this).closest(".select-main").find(".multiselect-all").prop("checked",!0):jQuery(this).closest(".select-main").find(".multiselect-all").prop("checked",!1),jQuery(this).closest("li").toggleClass("selected")}),jQuery(document).on("change",".multiselect-all",function(a){jQuery(this).is(":checked")?jQuery(this).closest("li").siblings().addClass("selected").find("input.multiselect-value").prop("checked",!0):jQuery(this).closest("li").siblings().removeClass("selected").find("input.multiselect-value").prop("checked",!1)});var l=function(a){var b=(jQuery(this).attr("id"),jQuery(this).closest(".select-main").find("li.selected").length);jQuery(this).closest(".select-main").find("ul").siblings(".selected-item").html(b+" item selected")};jQuery(document).on("input click change","input.wp-travel-multi-inner",l),jQuery(document).on("click",".fact-deleter",function(){jQuery(this).parent().parent().parent().remove()});const m={multiple:function(a,b){val=this.val(),index=this.data("index"),jQuery(".fact-"+index).html((a.options&&Object.entries(a.options)||[]).map(function(a){return jQuery('<label><input type="checkbox" name="wp_travel_trip_facts['+b+'][value][]" value="'+a[0]+'"  >'+a[1]+"</label>")}))},single:function(a,b){val=this.val(),index=this.data("index"),jQuery(".fact-"+index).html(jQuery("<select>").attr("name","wp_travel_trip_facts["+b+"][value]").html((a.options&&Object.entries(a.options)||[]).map(function(a){return jQuery("<option>").attr("value",a[0]).html(a[1])})))},text:function(a,b){val=this.val(),index=this.data("index"),jQuery(".fact-"+index).html(jQuery('<input type="text">').attr("name","wp_travel_trip_facts["+b+"][value]"))},default:function(a,b){val=this.val(),index=this.data("index"),jQuery(".fact-id-"+index).attr("name","wp_travel_trip_facts["+b+"][fact_id]").val(a.id),jQuery(".icon-"+index).attr("name","wp_travel_trip_facts["+b+"][icon]").val(a.icon),jQuery(".type-"+index).attr("name","wp_travel_trip_facts["+b+"][type]").val(a.type)}};jQuery(document).on("change",".fact-type-selecter",function(){const a=Math.random().toString(36).substr(2,9);jQuery(this).attr("name","wp_travel_trip_facts["+a+"][label]");const b=jQuery(this).val();var c=jQuery("#accordion-fact-data").data("factssettings");const d=c.filter(function(a){return b==a.name||a.id&&b==a.id})[0];c.filter(function(a){return b==a.type})[0];d&&(m[d.type].call(jQuery(this),d,a),m.default.call(jQuery(this),d,a))})}(jQuery);